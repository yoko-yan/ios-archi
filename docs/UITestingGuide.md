# UI Testing Guide

## 対象

Android/iOS アプリの自動化テストリポジトリ

## 基本方針

- Page Object Pattern を使用
- mobile-mcp で実機操作し、UI要素を把握してからコード生成
- **プロダクトコード変更は原則禁止**（必要な場合は必ずユーザーに確認）
- コンテキスト不明時はユーザーに確認
- **3回連続失敗時は状況整理してユーザーと相談**
- **タスク終了前に必ずテスト実行**

## テスト追加フロー（必須）

1. **MCP で画面操作**: 遷移・UI要素を把握（画面構成は ScreenGuide.md 参照）
2. **Page Object 作成/修正**: 既存コード参考に必要な Page Object を準備
3. **テストコード生成**: Page Object を使用してテスト実装
4. **実機実行**: 実デバイスで動作確認
5. **修正ループ**: 成功するまで 3-4 を繰り返す

## 重要ルール

### 画面遷移検証
1. MCP/スクリーンショットで遷移前後のUI要素を把握
2. 遷移後の**固有UI要素**で検証（遷移前にも存在する要素では不可）

### スクリーンショット（Android）
- MCP失敗時は `adb` で撮影
- 保存先: `screenshots/`
- タスク完了後に削除